import{u as a,M as e,r as s,b as t,s as l,t as d,d as i,e as u,w as r,i as n,f as o,j as c,B as f,O as m,a3 as _,E as p,ad as g,J as x,a7 as h,I as v}from"./index-o4dV0oGq.js";import{F as b}from"./req.CPxC-5sD.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const V=I({__name:"addFriend",setup(I){let V=a(),L="",j=e({}),F=s(""),S=s("");function k(){((a={uid:String,fid:String,msg:String,friendname:null|String})=>b.post({url:"/reqfriends",data:{...a}}))({uid:V.user._id,fid:j._id,msg:F.value.trim(),friendname:S.value.trim()}).then((a=>{200==a.status?(p({title:"发送成功",icon:"success",duration:1e3}),setTimeout((()=>{g()}),800)):(p({title:"发送失败",icon:"error",duration:1e3}),setTimeout((()=>{g()}),800))}))}return t((async a=>{if(!a.userId)return l({url:"/pages/chatList/chatList"});if(!V.user._id)return l({url:"/pages/chatList/chatList"});L=a.userId;let e=await((a={id:1e3})=>b.get({url:"/getuserinfo_userId",data:{...a}}))({id:L});if(200==e.status)for(let s in e.data)j[s]=e.data[s];d({title:"添加"}),j.img=`${b.baseUrl}/static/${j.img}`,F.value=`我是${V.user.nickname}交个朋友吧`})),(a,e)=>{const s=x,t=n,l=h,d=v;return i(),u(t,{class:"addFriendLayout"},{default:r((()=>[o(t,{class:"avatar-box"},{default:r((()=>[o(t,{class:"img"},{default:r((()=>[o(s,{src:c(j).img,mode:"widthFix"},null,8,["src"])])),_:1}),o(t,{class:"name-id"},{default:r((()=>[o(t,{class:"name"},{default:r((()=>[f(m(c(j).nickname),1)])),_:1}),o(t,{class:"id"},{default:r((()=>[o(t,{class:"tip"},{default:r((()=>[f("ID :")])),_:1}),o(t,{class:"num"},{default:r((()=>[f(m(c(j).userId),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(t,{class:"input-box"},{default:r((()=>[o(t,{class:"tip"},{default:r((()=>[f("验证信息")])),_:1}),o(l,{placeholder:"请输入验证信息",class:"textarea",modelValue:c(F),"onUpdate:modelValue":e[0]||(e[0]=a=>_(F)?F.value=a:F=a)},null,8,["modelValue"]),o(t,{class:"tip"},{default:r((()=>[f("备注")])),_:1}),o(d,{type:"text",placeholder:"请输入备注",class:"input_text",modelValue:c(S),"onUpdate:modelValue":e[1]||(e[1]=a=>_(S)?S.value=a:S=a)},null,8,["modelValue"])])),_:1}),o(t,{class:"btn-box"},{default:r((()=>[o(t,{class:"btn",onClick:k},{default:r((()=>[f("发送")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-fd9af5cd"]]);export{V as default};
