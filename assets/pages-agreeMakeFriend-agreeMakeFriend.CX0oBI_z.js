import{u as a,M as e,r as s,b as t,ad as l,s as u,d as i,e as d,w as r,i as n,f as o,j as c,B as f,O as m,a3 as _,E as p,J as g,a7 as x,I as b}from"./index-o4dV0oGq.js";import{F as h}from"./req.CPxC-5sD.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const V=v({__name:"agreeMakeFriend",setup(v){let V=a(),k="",I=e({}),j=s(""),F=s("");function w(){((a={uid:String,fid:String,name:null|String})=>h.post({url:"/makefriends",data:{...a}}))({uid:V.user._id,fid:I._id,name:F.value.trim()}).then((a=>{200==a.status?(p({title:"发送成功",icon:"success",duration:1e3}),setTimeout((()=>{l()}),800)):(p({title:"发送失败",icon:"error",duration:1e3}),setTimeout((()=>{l()}),800))}))}return t((async a=>{if(!a.id)return l();if(!a.msg)return l();if(!V.user._id)return u({url:"/pages/chatList/chatList"});k=a.id;let e=await((a={id:1e3})=>h.get({url:"/getuserinfo_userId",data:{...a}}))({id:k});if(200==e.status)for(let s in e.data)I[s]=e.data[s];I.img=`${h.baseUrl}/static/${I.img}`,j.value=a.msg})),(a,e)=>{const s=g,t=n,l=x,u=b;return i(),d(t,{class:"agreeMakeFriendLayout"},{default:r((()=>[o(t,{class:"avatar-box"},{default:r((()=>[o(t,{class:"img"},{default:r((()=>[o(s,{src:c(I).img,mode:"widthFix"},null,8,["src"])])),_:1}),o(t,{class:"name-id"},{default:r((()=>[o(t,{class:"name"},{default:r((()=>[f(m(c(I).nickname),1)])),_:1}),o(t,{class:"id"},{default:r((()=>[o(t,{class:"tip"},{default:r((()=>[f("ID :")])),_:1}),o(t,{class:"num"},{default:r((()=>[f(m(c(I).userId),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(t,{class:"input-box"},{default:r((()=>[o(t,{class:"tip"},{default:r((()=>[f("对方验证信息")])),_:1}),o(l,{placeholder:"请输入验证信息",class:"textarea",modelValue:c(j),"onUpdate:modelValue":e[0]||(e[0]=a=>_(j)?j.value=a:j=a),disabled:!0,focus:"false"},null,8,["modelValue"]),o(t,{class:"tip"},{default:r((()=>[f("备注")])),_:1}),o(u,{type:"text",placeholder:"请输入备注",class:"input_text",modelValue:c(F),"onUpdate:modelValue":e[1]||(e[1]=a=>_(F)?F.value=a:F=a)},null,8,["modelValue"])])),_:1}),o(t,{class:"btn-box"},{default:r((()=>[o(t,{class:"btn",onClick:w},{default:r((()=>[f("同意")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-281a35a7"]]);export{V as default};
